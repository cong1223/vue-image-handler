{"version":3,"sources":["webpack://vue-image-handler/webpack/universalModuleDefinition","webpack://vue-image-handler/webpack/bootstrap","webpack://vue-image-handler/./packages/vue-image-handler/src/index.vue?89b5","webpack://vue-image-handler/./node_modules/@soda/get-current-script/index.js","webpack://vue-image-handler/./packages/vue-image-handler/src/image-cropper.vue?3bcc","webpack://vue-image-handler/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://vue-image-handler/./packages/vue-image-handler/src/index.vue?6bed","webpack://vue-image-handler/./packages/vue-image-handler/src/image-cropper.vue?3c13","webpack://vue-image-handler/./packages/vue-image-handler/src/exif-js-min.js","webpack://vue-image-handler/packages/vue-image-handler/src/image-cropper.vue","webpack://vue-image-handler/./packages/vue-image-handler/src/image-cropper.vue?8111","webpack://vue-image-handler/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://vue-image-handler/./packages/vue-image-handler/src/image-cropper.vue?6a54","webpack://vue-image-handler/packages/vue-image-handler/src/index.vue","webpack://vue-image-handler/./packages/vue-image-handler/src/index.vue?4cbb","webpack://vue-image-handler/./packages/vue-image-handler/src/index.vue?b6f6","webpack://vue-image-handler/./packages/index.js","webpack://vue-image-handler/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getCurrentScript","descriptor","getOwnPropertyDescriptor","document","currentScript","Error","err","pageSource","inlineScriptSourceRegExp","inlineScriptSource","ieStackRegExp","ffStackRegExp","stackDetails","exec","stack","scriptLocation","line","currentLocation","location","href","replace","hash","scripts","getElementsByTagName","documentElement","outerHTML","RegExp","trim","length","readyState","src","innerHTML","window","match","render","_vm","_h","$createElement","_c","_self","staticClass","style","width","canvasWidth","height","canvasHeight","ref","attrs","option","img","size","outputType","canMove","on","realTime","staticStyle","backgroundImage","recoverImgUrl","staticRenderFns","scaleImg","cancelScale","directives","rawName","loading","expression","trueWidth","trueHeight","scale","x","y","rotate","imgs","_e","class","move","crop","cropping","startMove","cropW","cropH","cropOffsertX","cropOffsertY","cropMove","cropInfo","top","_v","_s","fixedBox","$event","changeCropSize","Exif","getImageData","data","Promise","reslove","reject","test","base64ToArrayBuffer","fileReader","FileReader","onload","e","target","result","objectURLToBlob","blob","readAsArrayBuffer","http","XMLHttpRequest","status","response","open","responseType","send","url","callback","base64","binary","atob","len","buffer","ArrayBuffer","view","Uint8Array","charCodeAt","getStringFromCharCode","dataView","start","str","String","fromCharCode","getUint8","getOrientation","arrayBuffer","orientation","exifIDCode","tiffOffset","firstIFDOffset","littleEndian","endianness","app1Start","ifdStart","offset","DataView","byteLength","getUint16","getUint32","getData","obj","then","catch","error","w","h","moveX","moveY","cropOldW","cropOldH","canChangeX","canChangeY","changeCropTypeX","changeCropTypeY","cropX","cropY","cropChangeX","cropChangeY","support","touches","touchNow","isIos","coe","scaling","scalingSet","coeStatus","isCanShow","props","type","Blob","File","default","outputSize","Number","info","Boolean","canScale","autoCrop","autoCropWidth","autoCropHeight","fixed","fixedNumber","Array","full","canMoveBox","original","centerBox","high","infoTrue","maxImgSize","enlarge","preW","limitMinSize","computed","dpr","devicePixelRatio","Math","abs","toFixed","isIE","ActiveXObject","passive","watch","checkedImg","val","reload","showPreview","goAutoCrop","methods","arr","navigator","userAgent","split","chromeVersion","reg","getVersion","safariVersion","toLowerCase","version","canvas","createElement","ctx","getContext","save","translate","PI","drawImage","restore","toBlob","URL","createObjectURL","revokeObjectURL","clearCrop","Image","$emit","max","checkOrientationImage","onerror","substr","crossOrigin","xhr","preventDefault","clientX","clientY","addEventListener","moveImg","leaveImg","touchScale","cancelTouchScale","moving","axis","getImgAxis","createCrop","endCrop","offsetX","pageX","$refs","cropper","offsetLeft","offsetY","pageY","offsetTop","oldTouch1","newTouch1","oldTouch2","newTouch2","oldL","sqrt","pow","newL","cha","num","setTimeout","checkoutImgAxis","removeEventListener","changeX","changeY","nowX","nowY","$nextTick","maxLeft","maxTop","maxRight","maxBottom","cropAxis","getCropAxis","imgW","imgH","x1","y1","x2","y2","changeSize","change","deltaY","wheelDelta","isFirefox","indexOf","fw","fh","fixedHeight","typeW","typeH","changeCropNow","changeCropEnd","wrapperW","wrapperH","minX","minY","fixedWidth","limitMinNum","isArray","parseFloat","leaveCrop","moveCrop","newX","newY","isMove","cx","cy","cb","dx","dy","setCanvasSize","round","getCropChecked","toDataURL","div","transformX","transformY","transformZ","transform","html","getComputedStyle","checkedMode","search","scaleX","scaleY","strH","min","str2","cw","ch","maxWidth","maxHeight","switchWH","changeCrop","checkCropLimitSize","canGo","undefined","onmousewheel","that","u","isIOS","HTMLCanvasElement","quality","binStr","normalizeComponent","scriptExports","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","existing","beforeCreate","concat","component","components","ImageCropper","imgFile","required","colorDiff","wipeColor","model","modelSrc","crap","canvasInfo","imgDataArr","resultImgDataArr","drawImgWidth","drawImgHeight","drawImgDx","drawImgDy","COLORS","WHITE","aValue","bValue","gValue","rValue","BLACK","clickColorInfo","init","immediate","transparentModeCanvas","colorFieldName","recoverCanvas","initCanvasInfo","getElementById","putImageData","ImageData","setCanvasImgToDownloadLink","getCropBlob","setImgIntoCanvas","$targetCanvas","reader","readAsDataURL","onloadend","dataURL","dw","dh","imgRatio","canvasRatio","slice","pos","getColorDiff","targetCanvasEl","colorInfo","imgData","install","Vue","installed","forEach","VueImageHandler"],"mappings":"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","file":"vue-image-handler.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-image-handler\"] = factory();\n\telse\n\t\troot[\"vue-image-handler\"] = factory();\n})((typeof self !== 'undefined' ? self : this), function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2f0f5c24&lang=css&scoped=true&\"","// addapted from the document.currentScript polyfill by Adam Miller\n// MIT license\n// source: https://github.com/amiller-gh/currentScript-polyfill\n\n// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    root.getCurrentScript = factory();\n  }\n}(typeof self !== 'undefined' ? self : this, function () {\n  function getCurrentScript () {\n    var descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')\n    // for chrome\n    if (!descriptor && 'currentScript' in document && document.currentScript) {\n      return document.currentScript\n    }\n\n    // for other browsers with native support for currentScript\n    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {\n      return document.currentScript\n    }\n  \n    // IE 8-10 support script readyState\n    // IE 11+ & Firefox support stack trace\n    try {\n      throw new Error();\n    }\n    catch (err) {\n      // Find the second match for the \"at\" string to get file src url from stack.\n      var ieStackRegExp = /.*at [^(]*\\((.*):(.+):(.+)\\)$/ig,\n        ffStackRegExp = /@([^@]*):(\\d+):(\\d+)\\s*$/ig,\n        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),\n        scriptLocation = (stackDetails && stackDetails[1]) || false,\n        line = (stackDetails && stackDetails[2]) || false,\n        currentLocation = document.location.href.replace(document.location.hash, ''),\n        pageSource,\n        inlineScriptSourceRegExp,\n        inlineScriptSource,\n        scripts = document.getElementsByTagName('script'); // Live NodeList collection\n  \n      if (scriptLocation === currentLocation) {\n        pageSource = document.documentElement.outerHTML;\n        inlineScriptSourceRegExp = new RegExp('(?:[^\\\\n]+?\\\\n){0,' + (line - 2) + '}[^<]*<script>([\\\\d\\\\D]*?)<\\\\/script>[\\\\d\\\\D]*', 'i');\n        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();\n      }\n  \n      for (var i = 0; i < scripts.length; i++) {\n        // If ready state is interactive, return the script tag\n        if (scripts[i].readyState === 'interactive') {\n          return scripts[i];\n        }\n  \n        // If src matches, return the script tag\n        if (scripts[i].src === scriptLocation) {\n          return scripts[i];\n        }\n  \n        // If inline source matches, return the script tag\n        if (\n          scriptLocation === currentLocation &&\n          scripts[i].innerHTML &&\n          scripts[i].innerHTML.trim() === inlineScriptSource\n        ) {\n          return scripts[i];\n        }\n      }\n  \n      // If no match, return null\n      return null;\n    }\n  };\n\n  return getCurrentScript\n}));\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-cropper.vue?vue&type=style&index=0&id=2cd22fa3&scoped=true&lang=css&\"","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"crop-wrapper mr16 fl\",style:({ width: _vm.canvasWidth, height: _vm.canvasHeight })},[_c('ImageCropper',{ref:\"cropper\",attrs:{\"img\":_vm.option.img,\"outputSize\":_vm.option.size,\"outputType\":_vm.option.outputType,\"auto-crop\":\"\",\"canMove\":_vm.option.canMove,\"mode\":\"contain\",\"autoCropWidth\":_vm.canvasWidth,\"autoCropHeight\":_vm.canvasHeight},on:{\"realTime\":_vm.realTime}})],1),_c('canvas',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"target_canvas\"}}),_c('div',{staticClass:\"recover_img_cover fl\",style:({ width: _vm.canvasWidth, height: _vm.canvasHeight })},[_c('div',{style:({ backgroundImage: (\"url('\" + _vm.recoverImgUrl + \"')\") }),attrs:{\"id\":\"recover_img\"}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"cropper\",staticClass:\"vue-cropper\",on:{\"mouseover\":_vm.scaleImg,\"mouseout\":_vm.cancelScale}},[(_vm.imgs)?_c('div',{staticClass:\"cropper-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading),expression:\"!loading\"}],staticClass:\"cropper-box-canvas\",style:({\n\t\t\t\t\t'width': _vm.trueWidth + 'px',\n\t\t\t\t\t'height': _vm.trueHeight + 'px',\n\t\t\t\t\t'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ _vm.x / _vm.scale + 'px,' + _vm.y / _vm.scale + 'px,' + '0)'\n\t\t\t\t\t+ 'rotateZ('+ _vm.rotate * 90 +'deg)'\n\t\t\t\t\t})},[_c('img',{ref:\"cropperImg\",attrs:{\"src\":_vm.imgs,\"alt\":\"cropper-img\"}})])]):_vm._e(),_c('div',{staticClass:\"cropper-drag-box\",class:{'cropper-move': _vm.move && !_vm.crop, 'cropper-crop': _vm.crop, 'cropper-modal': _vm.cropping},on:{\"mousedown\":_vm.startMove,\"touchstart\":_vm.startMove}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.cropping),expression:\"cropping\"}],staticClass:\"cropper-crop-box\",style:({\n\t\t\t\t\t'width': _vm.cropW + 'px',\n\t\t\t\t\t'height': _vm.cropH + 'px',\n\t\t\t\t\t'transform': 'translate3d('+ _vm.cropOffsertX + 'px,' + _vm.cropOffsertY + 'px,' + '0)'\n\t\t\t\t})},[_c('span',{staticClass:\"cropper-view-box\"},[_c('img',{style:({\n\t\t\t\t\t\t'width': _vm.trueWidth + 'px',\n\t\t\t\t\t\t'height': _vm.trueHeight + 'px',\n\t\t\t\t\t\t'transform': 'scale(' + _vm.scale + ',' + _vm.scale + ') ' + 'translate3d('+ (_vm.x - _vm.cropOffsertX) / _vm.scale  + 'px,' + (_vm.y - _vm.cropOffsertY) / _vm.scale + 'px,' + '0)'\n\t\t\t\t\t\t+ 'rotateZ('+ _vm.rotate * 90 +'deg)'\n\t\t\t\t\t\t}),attrs:{\"src\":_vm.imgs,\"alt\":\"cropper-img\"}})]),_c('span',{staticClass:\"cropper-face cropper-move\",on:{\"mousedown\":_vm.cropMove,\"touchstart\":_vm.cropMove}}),(_vm.info)?_c('span',{staticClass:\"crop-info\",style:({'top': _vm.cropInfo.top})},[_vm._v(_vm._s(_vm.cropInfo.width)+\" × \"+_vm._s(_vm.cropInfo.height))]):_vm._e(),(!_vm.fixedBox)?_c('span',[_c('span',{staticClass:\"crop-line line-w\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)}}}),_c('span',{staticClass:\"crop-line line-a\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)}}}),_c('span',{staticClass:\"crop-line line-s\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)}}}),_c('span',{staticClass:\"crop-line line-d\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)}}}),_c('span',{staticClass:\"crop-point point1\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 1, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 1, 1)}}}),_c('span',{staticClass:\"crop-point point2\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 1)}}}),_c('span',{staticClass:\"crop-point point3\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 2, 1)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 2, 1)}}}),_c('span',{staticClass:\"crop-point point4\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 1, 0)}}}),_c('span',{staticClass:\"crop-point point5\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, false, 2, 0)}}}),_c('span',{staticClass:\"crop-point point6\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 1, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 1, 2)}}}),_c('span',{staticClass:\"crop-point point7\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, false, true, 0, 2)}}}),_c('span',{staticClass:\"crop-point point8\",on:{\"mousedown\":function($event){return _vm.changeCropSize($event, true, true, 2, 2)},\"touchstart\":function($event){return _vm.changeCropSize($event, true, true, 2, 2)}}})]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const Exif = {};\n\nExif.getData = (img) => new Promise((reslove, reject) => {\n  let obj = {};\n  getImageData(img).then(data => {\n    obj.arrayBuffer = data;\n    obj.orientation = getOrientation(data);\n    reslove(obj)\n  }).catch(error => {\n    reject(error)\n  })\n})\n\n// 这里的获取exif要将图片转ArrayBuffer对象，这里假设获取了图片的baes64\n// 步骤一\n// base64转ArrayBuffer对象\nfunction getImageData(img) {\n  let data = null;\n  return new Promise((reslove, reject) => {\n    if (img.src) {\n      if (/^data:/i.test(img.src)) { // Data URI\n        data = base64ToArrayBuffer(img.src);\n        reslove(data)\n      } else if (/^blob:/i.test(img.src)) { // Object URL\n        var fileReader = new FileReader();\n        fileReader.onload = function (e) {\n          data = e.target.result;\n          reslove(data)\n        };\n        objectURLToBlob(img.src, function (blob) {\n          fileReader.readAsArrayBuffer(blob);\n        });\n      } else {\n        var http = new XMLHttpRequest();\n        http.onload = function () {\n          if (this.status == 200 || this.status === 0) {\n            data = http.response\n            reslove(data)\n          } else {\n            throw \"Could not load image\";\n          }\n          http = null;\n        };\n        http.open(\"GET\", img.src, true);\n        http.responseType = \"arraybuffer\";\n        http.send(null);\n      }\n    } else {\n      reject('img error')\n    }\n  })\n}\n\nfunction objectURLToBlob(url, callback) {\n  var http = new XMLHttpRequest();\n  http.open(\"GET\", url, true);\n  http.responseType = \"blob\";\n  http.onload = function () {\n    if (this.status == 200 || this.status === 0) {\n      callback(this.response);\n    }\n  };\n  http.send();\n}\n\n\n\nfunction base64ToArrayBuffer(base64) {\n  base64 = base64.replace(/^data:([^;]+);base64,/gmi, '');\n  var binary = atob(base64);\n  var len = binary.length;\n  var buffer = new ArrayBuffer(len);\n  var view = new Uint8Array(buffer);\n  for (var i = 0; i < len; i++) {\n    view[i] = binary.charCodeAt(i);\n  }\n  return buffer;\n}\n// 步骤二，Unicode码转字符串\n// ArrayBuffer对象 Unicode码转字符串\nfunction getStringFromCharCode(dataView, start, length) {\n  var str = '';\n  var i;\n  for (i = start, length += start; i < length; i++) {\n    str += String.fromCharCode(dataView.getUint8(i));\n  }\n  return str;\n}\n\n// 步骤三，获取jpg图片的exif的角度（在ios体现最明显）\nfunction getOrientation(arrayBuffer) {\n  var dataView = new DataView(arrayBuffer);\n  var length = dataView.byteLength;\n  var orientation;\n  var exifIDCode;\n  var tiffOffset;\n  var firstIFDOffset;\n  var littleEndian;\n  var endianness;\n  var app1Start;\n  var ifdStart;\n  var offset;\n  var i;\n  // Only handle JPEG image (start by 0xFFD8)\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n    offset = 2;\n    while (offset < length) {\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n        app1Start = offset;\n        break;\n      }\n      offset++;\n    }\n  }\n  if (app1Start) {\n    exifIDCode = app1Start + 4;\n    tiffOffset = app1Start + 10;\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n      endianness = dataView.getUint16(tiffOffset);\n      littleEndian = endianness === 0x4949;\n\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n        if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n          firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n          if (firstIFDOffset >= 0x00000008) {\n            ifdStart = tiffOffset + firstIFDOffset;\n          }\n        }\n      }\n    }\n  }\n  if (ifdStart) {\n    length = dataView.getUint16(ifdStart, littleEndian);\n\n    for (i = 0; i < length; i++) {\n      offset = ifdStart + i * 12 + 2;\n      if (dataView.getUint16(offset, littleEndian) === 0x0112 /* Orientation */) {\n\n        // 8 is the offset of the current tag's value\n        offset += 8;\n\n        // Get the original orientation value\n        orientation = dataView.getUint16(offset, littleEndian);\n\n        // Override the orientation with its default value for Safari (#120)\n        // if (IS_SAFARI_OR_UIWEBVIEW) {\n        //   dataView.setUint16(offset, 1, littleEndian);\n        // }\n        break;\n      }\n    }\n  }\n  return orientation;\n}\n\n\n\nexport default Exif","<template>\n  <div class=\"vue-cropper\" ref=\"cropper\" @mouseover=\"scaleImg\" @mouseout=\"cancelScale\">\n    <div class=\"cropper-box\" v-if=\"imgs\">\n      <div\n        class=\"cropper-box-canvas\"\n        v-show=\"!loading\"\n        :style=\"{\n\t\t\t\t\t'width': trueWidth + 'px',\n\t\t\t\t\t'height': trueHeight + 'px',\n\t\t\t\t\t'transform': 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ x / scale + 'px,' + y / scale + 'px,' + '0)'\n\t\t\t\t\t+ 'rotateZ('+ rotate * 90 +'deg)'\n\t\t\t\t\t}\"\n      >\n        <img :src=\"imgs\" alt=\"cropper-img\" ref=\"cropperImg\">\n      </div>\n    </div>\n    <div\n      class=\"cropper-drag-box\"\n      :class=\"{'cropper-move': move && !crop, 'cropper-crop': crop, 'cropper-modal': cropping}\"\n      @mousedown=\"startMove\"\n      @touchstart=\"startMove\"\n    ></div>\n    <div\n      v-show=\"cropping\"\n      class=\"cropper-crop-box\"\n      :style=\"{\n\t\t\t\t\t'width': cropW + 'px',\n\t\t\t\t\t'height': cropH + 'px',\n\t\t\t\t\t'transform': 'translate3d('+ cropOffsertX + 'px,' + cropOffsertY + 'px,' + '0)'\n\t\t\t\t}\"\n    >\n      <span class=\"cropper-view-box\">\n        <img\n          :style=\"{\n\t\t\t\t\t\t'width': trueWidth + 'px',\n\t\t\t\t\t\t'height': trueHeight + 'px',\n\t\t\t\t\t\t'transform': 'scale(' + scale + ',' + scale + ') ' + 'translate3d('+ (x - cropOffsertX) / scale  + 'px,' + (y - cropOffsertY) / scale + 'px,' + '0)'\n\t\t\t\t\t\t+ 'rotateZ('+ rotate * 90 +'deg)'\n\t\t\t\t\t\t}\"\n          :src=\"imgs\"\n          alt=\"cropper-img\"\n        >\n      </span>\n      <span class=\"cropper-face cropper-move\" @mousedown=\"cropMove\" @touchstart=\"cropMove\"></span>\n      <span\n        class=\"crop-info\"\n        v-if=\"info\"\n        :style=\"{'top': cropInfo.top}\"\n      >{{ cropInfo.width }} × {{ cropInfo.height }}</span>\n      <span v-if=\"!fixedBox\">\n        <span\n          class=\"crop-line line-w\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 1)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 1)\"\n        ></span>\n        <span\n          class=\"crop-line line-a\"\n          @mousedown=\"changeCropSize($event, true, false, 1, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 1, 0)\"\n        ></span>\n        <span\n          class=\"crop-line line-s\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 2)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 2)\"\n        ></span>\n        <span\n          class=\"crop-line line-d\"\n          @mousedown=\"changeCropSize($event, true, false, 2, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 2, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point1\"\n          @mousedown=\"changeCropSize($event, true, true, 1, 1)\"\n          @touchstart=\"changeCropSize($event, true, true, 1, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point2\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 1)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point3\"\n          @mousedown=\"changeCropSize($event, true, true, 2, 1)\"\n          @touchstart=\"changeCropSize($event, true, true, 2, 1)\"\n        ></span>\n        <span\n          class=\"crop-point point4\"\n          @mousedown=\"changeCropSize($event, true, false, 1, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 1, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point5\"\n          @mousedown=\"changeCropSize($event, true, false, 2, 0)\"\n          @touchstart=\"changeCropSize($event, true, false, 2, 0)\"\n        ></span>\n        <span\n          class=\"crop-point point6\"\n          @mousedown=\"changeCropSize($event, true, true, 1, 2)\"\n          @touchstart=\"changeCropSize($event, true, true, 1, 2)\"\n        ></span>\n        <span\n          class=\"crop-point point7\"\n          @mousedown=\"changeCropSize($event, false, true, 0, 2)\"\n          @touchstart=\"changeCropSize($event, false, true, 0, 2)\"\n        ></span>\n        <span\n          class=\"crop-point point8\"\n          @mousedown=\"changeCropSize($event, true, true, 2, 2)\"\n          @touchstart=\"changeCropSize($event, true, true, 2, 2)\"\n        ></span>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport exifmin from \"./exif-js-min\";\nexport default {\n  name: 'ImageCropper',\n  data: function() {\n    return {\n      // 容器高宽\n      w: 0,\n      h: 0,\n      // 图片缩放比例\n      scale: 1,\n      // 图片偏移x轴\n      x: 0,\n      // 图片偏移y轴\n      y: 0,\n      // 图片加载\n      loading: true,\n      // 图片真实宽度\n      trueWidth: 0,\n      // 图片真实高度\n      trueHeight: 0,\n      move: true,\n      // 移动的x\n      moveX: 0,\n      // 移动的y\n      moveY: 0,\n      // 开启截图\n      crop: false,\n      // 正在截图\n      cropping: false,\n      // 裁剪框大小\n      cropW: 0,\n      cropH: 0,\n      cropOldW: 0,\n      cropOldH: 0,\n      // 判断是否能够改变\n      canChangeX: false,\n      canChangeY: false,\n      // 改变的基准点\n      changeCropTypeX: 1,\n      changeCropTypeY: 1,\n      // 裁剪框的坐标轴\n      cropX: 0,\n      cropY: 0,\n      cropChangeX: 0,\n      cropChangeY: 0,\n      cropOffsertX: 0,\n      cropOffsertY: 0,\n      // 支持的滚动事件\n      support: \"\",\n      // 移动端手指缩放\n      touches: [],\n      touchNow: false,\n      // 图片旋转\n      rotate: 0,\n      isIos: false,\n      orientation: 0,\n      imgs: \"\",\n      // 图片缩放系数\n      coe: 0.2,\n      // 是否正在多次缩放\n      scaling: false,\n      scalingSet: \"\",\n      coeStatus: \"\",\n      // 控制emit触发频率\n      isCanShow: true\n    };\n  },\n  props: {\n    img: {\n      type: [String, Blob, null, File],\n      default: \"\"\n    },\n    // 输出图片压缩比\n    outputSize: {\n      type: Number,\n      default: 1\n    },\n    outputType: {\n      type: String,\n      default: \"jpeg\"\n    },\n    info: {\n      type: Boolean,\n      default: true\n    },\n    // 是否开启滚轮放大缩小\n    canScale: {\n      type: Boolean,\n      default: true\n    },\n    // 是否自成截图框\n    autoCrop: {\n      type: Boolean,\n      default: false\n    },\n    autoCropWidth: {\n      type: [Number, String],\n      default: 0\n    },\n    autoCropHeight: {\n      type: [Number, String],\n      default: 0\n    },\n    // 是否开启固定宽高比\n    fixed: {\n      type: Boolean,\n      default: false\n    },\n    // 宽高比 w/h\n    fixedNumber: {\n      type: Array,\n      default: () => {\n        return [1, 1];\n      }\n    },\n    // 固定大小 禁止改变截图框大小\n    fixedBox: {\n      type: Boolean,\n      default: false\n    },\n    // 输出截图是否缩放\n    full: {\n      type: Boolean,\n      default: false\n    },\n    // 是否可以拖动图片\n    canMove: {\n      type: Boolean,\n      default: true\n    },\n    // 是否可以拖动截图框\n    canMoveBox: {\n      type: Boolean,\n      default: true\n    },\n    // 上传图片按照原始比例显示\n    original: {\n      type: Boolean,\n      default: false\n    },\n    // 截图框能否超过图片\n    centerBox: {\n      type: Boolean,\n      default: false\n    },\n    // 是否根据dpr输出高清图片\n    high: {\n      type: Boolean,\n      default: true\n    },\n    // 截图框展示宽高类型\n    infoTrue: {\n      type: Boolean,\n      default: false\n    },\n    // 可以压缩图片宽高  默认不超过200\n    maxImgSize: {\n      type: [Number, String],\n      default: 2000\n    },\n    // 倍数  可渲染当前截图框的n倍 0 - 1000;\n    enlarge: {\n      type: [Number, String],\n      default: 1\n    },\n    // 自动预览的固定宽度\n    preW: {\n      type: [Number, String],\n      default: 0\n    },\n    /*\n     图片布局方式 mode 实现和css背景一样的效果\n     contain  居中布局 默认不会缩放 保证图片在容器里面 mode: 'contain'\n     cover    拉伸布局 填充整个容器  mode: 'cover'\n     如果仅有一个数值被给定，这个数值将作为宽度值大小，高度值将被设定为auto。 mode: '50px'\n     如果有两个数值被给定，第一个将作为宽度值大小，第二个作为高度值大小。 mode: '50px 60px'\n     */\n    mode: {\n      type: String,\n      default: \"contain\"\n    },\n    //限制最小区域,可传1以上的数字和字符串，限制长宽都是这么大\n    // 也可以传数组[90,90]\n    limitMinSize: {\n      type: [Number, Array, String],\n      default: () => {\n        return 10;\n      }\n    },\n  },\n  computed: {\n    cropInfo() {\n      let obj = {};\n      obj.top = this.cropOffsertY > 21 ? \"-21px\" : \"0px\";\n      obj.width = this.cropW > 0 ? this.cropW : 0;\n      obj.height = this.cropH > 0 ? this.cropH : 0;\n      if (this.infoTrue) {\n        let dpr = 1;\n        if (this.high && !this.full) {\n          dpr = window.devicePixelRatio;\n        }\n        if ((this.enlarge !== 1) & !this.full) {\n          dpr = Math.abs(Number(this.enlarge));\n        }\n        obj.width = obj.width * dpr;\n        obj.height = obj.height * dpr;\n        if (this.full) {\n          obj.width = obj.width / this.scale;\n          obj.height = obj.height / this.scale;\n        }\n      }\n      obj.width = obj.width.toFixed(0);\n      obj.height = obj.height.toFixed(0);\n      return obj;\n    },\n    isIE() {\n      // var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\n      const isIE = !!window.ActiveXObject || 'ActiveXObject' in window; //判断是否IE浏览器\n      return isIE;\n    },\n    passive () {\n      return this.isIE ? null : {\n        passive: false\n      }\n    }\n  },\n  watch: {\n    // 如果图片改变， 重新布局\n    img() {\n      // 当传入图片时, 读取图片信息同时展示\n      this.checkedImg();\n    },\n    imgs(val) {\n      if (val === \"\") {\n        return;\n      }\n      this.reload();\n    },\n    cropW() {\n      this.showPreview();\n    },\n    cropH() {\n      this.showPreview();\n    },\n    cropOffsertX() {\n      this.showPreview();\n    },\n    cropOffsertY() {\n      this.showPreview();\n    },\n    scale() {\n      this.showPreview();\n    },\n    x() {\n      this.showPreview();\n    },\n    y() {\n      this.showPreview();\n    },\n    autoCrop(val) {\n      if (val) {\n        this.goAutoCrop();\n      }\n    },\n    // 修改了自动截图框\n    autoCropWidth() {\n      if (this.autoCrop) {\n        this.goAutoCrop();\n      }\n    },\n    autoCropHeight() {\n      if (this.autoCrop) {\n        this.goAutoCrop();\n      }\n    },\n    mode() {\n      this.checkedImg();\n    },\n    rotate() {\n      this.showPreview();\n      if (this.autoCrop) {\n        this.goAutoCrop(this.cropW, this.cropH);\n      } else {\n        if (this.cropW > 0 || this.cropH > 0) {\n          this.goAutoCrop(this.cropW, this.cropH);\n        }\n      }\n    }\n  },\n  methods: {\n    getVersion (name) {\n      var arr = navigator.userAgent.split(' ');\n      var chromeVersion = '';\n      let result = 0;\n      const reg = new RegExp(name, 'i')\n      for(var i=0;i < arr.length;i++){\n        if(reg.test(arr[i]))\n          chromeVersion = arr[i]\n      }\n      if(chromeVersion){\n        result = chromeVersion.split('/')[1].split('.');\n      } else {\n        result = ['0', '0', '0'];\n      }\n      return result\n    },\n    checkOrientationImage(img, orientation, width, height) {\n      // 如果是 chrome内核版本在81 safari 在 605 以上不处理图片旋转\n      // alert(navigator.userAgent)\n      if (this.getVersion('chrome')[0] >= 81) {\n        orientation = -1\n      } else {\n        if (this.getVersion('safari')[0] >= 605 ) {\n          const safariVersion = this.getVersion('version')\n          if (safariVersion[0] > 13 && safariVersion[1] > 1) {\n            orientation = -1\n          }\n        } else {\n          //  判断 ios 版本进行处理\n          // 针对 ios 版本大于 13.4的系统不做图片旋转\n          const isIos  = navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/)\n          if (isIos) {\n            let version = isIos[1]\n            version = version.split('_')\n            if (version[0] > 13 ||  (version[0] >= 13 && version[1] >= 4)) {\n              orientation = -1\n            }\n          }\n        }\n      }\n\n      // alert(`当前处理的orientation${orientation}`)\n      let canvas = document.createElement(\"canvas\");\n      let ctx = canvas.getContext(\"2d\");\n      ctx.save();\n\n      switch (orientation) {\n        case 2:\n          canvas.width = width;\n          canvas.height = height;\n          // horizontal flip\n          ctx.translate(width, 0);\n          ctx.scale(-1, 1);\n          break;\n        case 3:\n          canvas.width = width;\n          canvas.height = height;\n          //180 graus\n          ctx.translate(width / 2, height / 2);\n          ctx.rotate((180 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        case 4:\n          canvas.width = width;\n          canvas.height = height;\n          // vertical flip\n          ctx.translate(0, height);\n          ctx.scale(1, -1);\n          break;\n        case 5:\n          // vertical flip + 90 rotate right\n          canvas.height = width;\n          canvas.width = height;\n          ctx.rotate(0.5 * Math.PI);\n          ctx.scale(1, -1);\n          break;\n        case 6:\n          canvas.width = height;\n          canvas.height = width;\n          //90 graus\n          ctx.translate(height / 2, width / 2);\n          ctx.rotate((90 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        case 7:\n          // horizontal flip + 90 rotate right\n          canvas.height = width;\n          canvas.width = height;\n          ctx.rotate(0.5 * Math.PI);\n          ctx.translate(width, -height);\n          ctx.scale(-1, 1);\n          break;\n        case 8:\n          canvas.height = width;\n          canvas.width = height;\n          //-90 graus\n          ctx.translate(height / 2, width / 2);\n          ctx.rotate((-90 * Math.PI) / 180);\n          ctx.translate(-width / 2, -height / 2);\n          break;\n        default:\n          canvas.width = width;\n          canvas.height = height;\n      }\n      ctx.drawImage(img, 0, 0, width, height);\n      ctx.restore();\n      canvas.toBlob(\n        blob => {\n          let data = URL.createObjectURL(blob);\n          URL.revokeObjectURL(this.imgs)\n          this.imgs = data;\n        },\n        \"image/\" + this.outputType,\n        1\n      );\n    },\n    // checkout img\n    checkedImg() {\n      if (this.img === null || this.img === '') {\n        this.imgs = ''\n        this.clearCrop()\n        return\n      }\n      this.loading = true;\n      this.scale = 1;\n      this.rotate = 0;\n      this.clearCrop();\n      let img = new Image();\n      img.onload = () => {\n        if (this.img === \"\") {\n          this.$emit(\"imgLoad\", \"error\");\n          this.$emit(\"img-load\", \"error\");\n          return false;\n        }\n        let width = img.width;\n        let height = img.height;\n        exifmin.getData(img).then(data => {\n          this.orientation = data.orientation || 1;\n          let max = Number(this.maxImgSize);\n          if (!this.orientation && (width < max) & (height < max)) {\n            this.imgs = this.img;\n            return;\n          }\n          if (width > max) {\n            height = (height / width) * max;\n            width = max;\n          }\n          if (height > max) {\n            width = (width / height) * max;\n            height = max;\n          }\n          this.checkOrientationImage(img, this.orientation, width, height);\n        });\n      };\n      img.onerror = () => {\n        this.$emit(\"imgLoad\", \"error\");\n        this.$emit(\"img-load\", \"error\");\n      };\n      // 判断如果不是base64图片 再添加crossOrigin属性，否则会导致iOS低版本(10.2)无法显示图片\n      if (this.img.substr(0, 4) !== \"data\") {\n        img.crossOrigin = \"\";\n      }\n      if (this.isIE) {\n        var xhr = new XMLHttpRequest();\n        xhr.onload = function() {\n          var url = URL.createObjectURL(this.response);\n          img.src = url;\n        };\n        xhr.open(\"GET\", this.img, true);\n        xhr.responseType = \"blob\";\n        xhr.send();\n      } else {\n        img.src = this.img;\n      }\n    },\n    // 当按下鼠标键\n    startMove(e) {\n      e.preventDefault();\n      // 如果move 为true 表示当前可以拖动\n      if (this.move && !this.crop) {\n        if (!this.canMove) {\n          return false;\n        }\n        // 开始移动\n        this.moveX = ('clientX' in e ? e.clientX : e.touches[0].clientX) - this.x;\n        this.moveY = ('clientY' in e ? e.clientY : e.touches[0].clientY) - this.y;\n        if (e.touches) {\n          window.addEventListener(\"touchmove\", this.moveImg);\n          window.addEventListener(\"touchend\", this.leaveImg);\n          if (e.touches.length == 2) {\n            // 记录手指刚刚放上去\n            this.touches = e.touches;\n            window.addEventListener(\"touchmove\", this.touchScale);\n            window.addEventListener(\"touchend\", this.cancelTouchScale);\n          }\n        } else {\n          window.addEventListener(\"mousemove\", this.moveImg);\n          window.addEventListener(\"mouseup\", this.leaveImg);\n        }\n        // 触发图片移动事件\n        this.$emit(\"imgMoving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n        this.$emit(\"img-moving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n      } else {\n        // 截图ing\n        this.cropping = true;\n        // 绑定截图事件\n        window.addEventListener(\"mousemove\", this.createCrop);\n        window.addEventListener(\"mouseup\", this.endCrop);\n        window.addEventListener(\"touchmove\", this.createCrop);\n        window.addEventListener(\"touchend\", this.endCrop);\n        this.cropOffsertX = e.offsetX\n          ? e.offsetX\n          : e.touches[0].pageX - this.$refs.cropper.offsetLeft;\n        this.cropOffsertY = e.offsetY\n          ? e.offsetY\n          : e.touches[0].pageY - this.$refs.cropper.offsetTop;\n        this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n        this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n        this.cropChangeX = this.cropOffsertX;\n        this.cropChangeY = this.cropOffsertY;\n        this.cropW = 0;\n        this.cropH = 0;\n      }\n    },\n    // 移动端缩放\n    touchScale(e) {\n      e.preventDefault();\n      let scale = this.scale;\n      // 记录变化量\n      // 第一根手指\n      var oldTouch1 = {\n        x: this.touches[0].clientX,\n        y: this.touches[0].clientY\n      };\n      var newTouch1 = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n      // 第二根手指\n      var oldTouch2 = {\n        x: this.touches[1].clientX,\n        y: this.touches[1].clientY\n      };\n      var newTouch2 = {\n        x: e.touches[1].clientX,\n        y: e.touches[1].clientY\n      };\n      var oldL = Math.sqrt(\n        Math.pow(oldTouch1.x - oldTouch2.x, 2) +\n        Math.pow(oldTouch1.y - oldTouch2.y, 2)\n      );\n      var newL = Math.sqrt(\n        Math.pow(newTouch1.x - newTouch2.x, 2) +\n        Math.pow(newTouch1.y - newTouch2.y, 2)\n      );\n      var cha = newL - oldL;\n      // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\n      // 1px - 0.2\n      var coe = 1;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      coe = coe > 0.1 ? 0.1 : coe;\n      var num = coe * cha;\n      if (!this.touchNow) {\n        this.touchNow = true;\n        if (cha > 0) {\n          scale += Math.abs(num);\n        } else if (cha < 0) {\n          scale > Math.abs(num) ? (scale -= Math.abs(num)) : scale;\n        }\n        this.touches = e.touches;\n        setTimeout(() => {\n          this.touchNow = false;\n        }, 8);\n        if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n          return false;\n        }\n        this.scale = scale;\n      }\n    },\n    cancelTouchScale() {\n      window.removeEventListener(\"touchmove\", this.touchScale);\n    },\n    // 移动图片\n    moveImg(e) {\n      e.preventDefault();\n      if (e.touches && e.touches.length === 2) {\n        this.touches = e.touches;\n        window.addEventListener(\"touchmove\", this.touchScale);\n        window.addEventListener(\"touchend\", this.cancelTouchScale);\n        window.removeEventListener(\"touchmove\", this.moveImg);\n        return false;\n      }\n      let nowX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      let nowY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      let changeX, changeY;\n      changeX = nowX - this.moveX;\n      changeY = nowY - this.moveY;\n      this.$nextTick(() => {\n        if (this.centerBox) {\n          let axis = this.getImgAxis(changeX, changeY, this.scale);\n          let cropAxis = this.getCropAxis();\n          let imgW = this.trueHeight * this.scale;\n          let imgH = this.trueWidth * this.scale;\n          let maxLeft, maxTop, maxRight, maxBottom;\n          switch (this.rotate) {\n            case 1:\n            case -1:\n            case 3:\n            case -3:\n              maxLeft =\n                this.cropOffsertX -\n                (this.trueWidth * (1 - this.scale)) / 2 +\n                (imgW - imgH) / 2;\n              maxTop =\n                this.cropOffsertY -\n                (this.trueHeight * (1 - this.scale)) / 2 +\n                (imgH - imgW) / 2;\n              maxRight = maxLeft - imgW + this.cropW;\n              maxBottom = maxTop - imgH + this.cropH;\n              break;\n            default:\n              maxLeft =\n                this.cropOffsertX - (this.trueWidth * (1 - this.scale)) / 2;\n              maxTop =\n                this.cropOffsertY - (this.trueHeight * (1 - this.scale)) / 2;\n              maxRight = maxLeft - imgH + this.cropW;\n              maxBottom = maxTop - imgW + this.cropH;\n              break;\n          }\n          // 图片左边 图片不能超过截图框\n          if (axis.x1 >= cropAxis.x1) {\n            changeX = maxLeft;\n          }\n          // 图片上边 图片不能超过截图框\n          if (axis.y1 >= cropAxis.y1) {\n            changeY = maxTop;\n          }\n          // 图片右边\n          if (axis.x2 <= cropAxis.x2) {\n            changeX = maxRight;\n          }\n          // 图片下边\n          if (axis.y2 <= cropAxis.y2) {\n            changeY = maxBottom;\n          }\n        }\n        this.x = changeX;\n        this.y = changeY;\n        // 触发图片移动事件\n        this.$emit(\"imgMoving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n        this.$emit(\"img-moving\", {\n          moving: true,\n          axis: this.getImgAxis()\n        });\n      });\n    },\n    // 移动图片结束\n    leaveImg() {\n      window.removeEventListener(\"mousemove\", this.moveImg);\n      window.removeEventListener(\"touchmove\", this.moveImg);\n      window.removeEventListener(\"mouseup\", this.leaveImg);\n      window.removeEventListener(\"touchend\", this.leaveImg);\n      // 触发图片移动事件\n      this.$emit(\"imgMoving\", {\n        moving: false,\n        axis: this.getImgAxis()\n      });\n      this.$emit(\"img-moving\", {\n        moving: false,\n        axis: this.getImgAxis()\n      });\n    },\n    // 缩放图片\n    scaleImg() {\n      if (this.canScale) {\n        window.addEventListener(this.support, this.changeSize, this.passive);\n      }\n    },\n    // 移出框\n    cancelScale() {\n      if (this.canScale) {\n        window.removeEventListener(this.support, this.changeSize);\n      }\n    },\n    // 改变大小函数\n    changeSize(e) {\n      e.preventDefault();\n      let scale = this.scale;\n      var change = e.deltaY || e.wheelDelta;\n      // 根据图片本身大小 决定每次改变大小的系数, 图片越大系数越小\n      var isFirefox = navigator.userAgent.indexOf(\"Firefox\");\n      change = isFirefox > 0 ? change * 30 : change;\n      // 修复ie的滚动缩放\n      if (this.isIE) {\n        change = -change;\n      }\n      // 1px - 0.2\n      var coe = this.coe;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      var num = coe * change;\n      num < 0\n        ? (scale += Math.abs(num))\n        : scale > Math.abs(num)\n        ? (scale -= Math.abs(num))\n        : scale;\n      // 延迟0.1s 每次放大大或者缩小的范围\n      let status = num < 0 ? \"add\" : \"reduce\";\n      if (status !== this.coeStatus) {\n        this.coeStatus = status;\n        this.coe = 0.2;\n      }\n      if (!this.scaling) {\n        this.scalingSet = setTimeout(() => {\n          this.scaling = false;\n          this.coe = this.coe += 0.01;\n        }, 50);\n      }\n      this.scaling = true;\n      if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n        return false;\n      }\n      this.scale = scale;\n    },\n    // 修改图片大小函数\n    changeScale(num) {\n      let scale = this.scale;\n      num = num || 1;\n      var coe = 20;\n      coe =\n        coe / this.trueWidth > coe / this.trueHeight\n          ? coe / this.trueHeight\n          : coe / this.trueWidth;\n      num = num * coe;\n      num > 0\n        ? (scale += Math.abs(num))\n        : scale > Math.abs(num)\n        ? (scale -= Math.abs(num))\n        : scale;\n      if (!this.checkoutImgAxis(this.x, this.y, scale)) {\n        return false;\n      }\n      this.scale = scale;\n    },\n    // 创建截图框\n    createCrop(e) {\n      e.preventDefault();\n      // 移动生成大小\n      var nowX = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0;\n      var nowY = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0;\n      this.$nextTick(() => {\n        var fw = nowX - this.cropX;\n        var fh = nowY - this.cropY;\n        if (fw > 0) {\n          this.cropW =\n            fw + this.cropChangeX > this.w ? this.w - this.cropChangeX : fw;\n          this.cropOffsertX = this.cropChangeX;\n        } else {\n          this.cropW =\n            this.w - this.cropChangeX + Math.abs(fw) > this.w\n              ? this.cropChangeX\n              : Math.abs(fw);\n          this.cropOffsertX =\n            this.cropChangeX + fw > 0 ? this.cropChangeX + fw : 0;\n        }\n        if (!this.fixed) {\n          if (fh > 0) {\n            this.cropH =\n              fh + this.cropChangeY > this.h ? this.h - this.cropChangeY : fh;\n            this.cropOffsertY = this.cropChangeY;\n          } else {\n            this.cropH =\n              this.h - this.cropChangeY + Math.abs(fh) > this.h\n                ? this.cropChangeY\n                : Math.abs(fh);\n            this.cropOffsertY =\n              this.cropChangeY + fh > 0 ? this.cropChangeY + fh : 0;\n          }\n        } else {\n          var fixedHeight =\n            (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          if (fixedHeight + this.cropOffsertY > this.h) {\n            this.cropH = this.h - this.cropOffsertY;\n            this.cropW =\n              (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n            if (fw > 0) {\n              this.cropOffsertX = this.cropChangeX;\n            } else {\n              this.cropOffsertX = this.cropChangeX - this.cropW;\n            }\n          } else {\n            this.cropH = fixedHeight;\n          }\n          // eslint-disable-next-line no-self-assign\n          this.cropOffsertY = this.cropOffsertY;\n        }\n      });\n    },\n    // 改变截图框大小\n    changeCropSize(e, w, h, typeW, typeH) {\n      e.preventDefault();\n      window.addEventListener(\"mousemove\", this.changeCropNow);\n      window.addEventListener(\"mouseup\", this.changeCropEnd);\n      window.addEventListener(\"touchmove\", this.changeCropNow);\n      window.addEventListener(\"touchend\", this.changeCropEnd);\n      this.canChangeX = w;\n      this.canChangeY = h;\n      this.changeCropTypeX = typeW;\n      this.changeCropTypeY = typeH;\n      this.cropX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      this.cropY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      this.cropOldW = this.cropW;\n      this.cropOldH = this.cropH;\n      this.cropChangeX = this.cropOffsertX;\n      this.cropChangeY = this.cropOffsertY;\n      if (this.fixed) {\n        if (this.canChangeX && this.canChangeY) {\n          this.canChangeY = 0;\n        }\n      }\n      this.$emit('change-crop-size', {\n        width: this.cropW,\n        height: this.cropH\n      })\n    },\n    // 正在改变\n    changeCropNow(e) {\n      e.preventDefault();\n      var nowX = 'clientX' in e ? e.clientX : e.touches ? e.touches[0].clientX : 0;\n      var nowY = 'clientY' in e ? e.clientY : e.touches ? e.touches[0].clientY : 0;\n      // 容器的宽高\n      let wrapperW = this.w;\n      let wrapperH = this.h;\n      // 不能超过的坐标轴\n      let minX = 0;\n      let minY = 0;\n      if (this.centerBox) {\n        let axis = this.getImgAxis();\n        let imgW = axis.x2;\n        let imgH = axis.y2;\n        minX = axis.x1 > 0 ? axis.x1 : 0;\n        minY = axis.y1 > 0 ? axis.y1 : 0;\n        if (wrapperW > imgW) {\n          wrapperW = imgW;\n        }\n        if (wrapperH > imgH) {\n          wrapperH = imgH;\n        }\n      }\n      this.$nextTick(() => {\n        var fw = nowX - this.cropX;\n        var fh = nowY - this.cropY;\n        if (this.canChangeX) {\n          if (this.changeCropTypeX === 1) {\n            if (this.cropOldW - fw > 0) {\n              this.cropW =\n                wrapperW - this.cropChangeX - fw <= wrapperW - minX\n                  ? this.cropOldW - fw\n                  : this.cropOldW + this.cropChangeX - minX;\n              this.cropOffsertX =\n                wrapperW - this.cropChangeX - fw <= wrapperW - minX\n                  ? this.cropChangeX + fw\n                  : minX;\n            } else {\n              this.cropW =\n                Math.abs(fw) + this.cropChangeX <= wrapperW\n                  ? Math.abs(fw) - this.cropOldW\n                  : wrapperW - this.cropOldW - this.cropChangeX;\n              this.cropOffsertX = this.cropChangeX + this.cropOldW;\n            }\n          } else if (this.changeCropTypeX === 2) {\n            if (this.cropOldW + fw > 0) {\n              this.cropW =\n                this.cropOldW + fw + this.cropOffsertX <= wrapperW\n                  ? this.cropOldW + fw\n                  : wrapperW - this.cropOffsertX;\n              this.cropOffsertX = this.cropChangeX;\n            } else {\n              // 右侧坐标抽 超过左侧\n              this.cropW =\n                wrapperW - this.cropChangeX + Math.abs(fw + this.cropOldW) <=\n                wrapperW - minX\n                  ? Math.abs(fw + this.cropOldW)\n                  : this.cropChangeX - minX;\n              this.cropOffsertX =\n                wrapperW - this.cropChangeX + Math.abs(fw + this.cropOldW) <=\n                wrapperW - minX\n                  ? this.cropChangeX - Math.abs(fw + this.cropOldW)\n                  : minX;\n            }\n          }\n        }\n        if (this.canChangeY) {\n          if (this.changeCropTypeY === 1) {\n            if (this.cropOldH - fh > 0) {\n              this.cropH =\n                wrapperH - this.cropChangeY - fh <= wrapperH - minY\n                  ? this.cropOldH - fh\n                  : this.cropOldH + this.cropChangeY - minY;\n              this.cropOffsertY =\n                wrapperH - this.cropChangeY - fh <= wrapperH - minY\n                  ? this.cropChangeY + fh\n                  : minY;\n            } else {\n              this.cropH =\n                Math.abs(fh) + this.cropChangeY <= wrapperH\n                  ? Math.abs(fh) - this.cropOldH\n                  : wrapperH - this.cropOldH - this.cropChangeY;\n              this.cropOffsertY = this.cropChangeY + this.cropOldH;\n            }\n          } else if (this.changeCropTypeY === 2) {\n            if (this.cropOldH + fh > 0) {\n              this.cropH =\n                this.cropOldH + fh + this.cropOffsertY <= wrapperH\n                  ? this.cropOldH + fh\n                  : wrapperH - this.cropOffsertY;\n              this.cropOffsertY = this.cropChangeY;\n            } else {\n              this.cropH =\n                wrapperH - this.cropChangeY + Math.abs(fh + this.cropOldH) <=\n                wrapperH - minY\n                  ? Math.abs(fh + this.cropOldH)\n                  : this.cropChangeY - minY;\n              this.cropOffsertY =\n                wrapperH - this.cropChangeY + Math.abs(fh + this.cropOldH) <=\n                wrapperH - minY\n                  ? this.cropChangeY - Math.abs(fh + this.cropOldH)\n                  : minY;\n            }\n          }\n        }\n        if (this.canChangeX && this.fixed) {\n          var fixedHeight =\n            (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          if (fixedHeight + this.cropOffsertY > wrapperH) {\n            this.cropH = wrapperH - this.cropOffsertY;\n            this.cropW =\n              (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n          } else {\n            this.cropH = fixedHeight;\n          }\n        }\n        if (this.canChangeY && this.fixed) {\n          var fixedWidth =\n            (this.cropH / this.fixedNumber[1]) * this.fixedNumber[0];\n          if (fixedWidth + this.cropOffsertX > wrapperW) {\n            this.cropW = wrapperW - this.cropOffsertX;\n            this.cropH =\n              (this.cropW / this.fixedNumber[0]) * this.fixedNumber[1];\n          } else {\n            this.cropW = fixedWidth;\n          }\n        }\n      });\n    },\n    checkCropLimitSize () {\n      let { cropW, cropH, limitMinSize } = this;\n      let limitMinNum = new Array;\n      if (!Array.isArray[limitMinSize]) {\n        limitMinNum = [limitMinSize, limitMinSize]\n      } else {\n        limitMinNum = limitMinSize\n      }\n\n      //限制最小宽度和高度\n      cropW = parseFloat(limitMinNum[0])\n      cropH = parseFloat(limitMinNum[1])\n      return [cropW, cropH]\n    },\n    // 结束改变\n    changeCropEnd() {\n      window.removeEventListener(\"mousemove\", this.changeCropNow);\n      window.removeEventListener(\"mouseup\", this.changeCropEnd);\n      window.removeEventListener(\"touchmove\", this.changeCropNow);\n      window.removeEventListener(\"touchend\", this.changeCropEnd);\n    },\n    // 创建完成\n    endCrop() {\n      if (this.cropW === 0 && this.cropH === 0) {\n        this.cropping = false;\n      }\n      window.removeEventListener(\"mousemove\", this.createCrop);\n      window.removeEventListener(\"mouseup\", this.endCrop);\n      window.removeEventListener(\"touchmove\", this.createCrop);\n      window.removeEventListener(\"touchend\", this.endCrop);\n    },\n    // 开始截图\n    startCrop() {\n      this.crop = true;\n    },\n    // 停止截图\n    stopCrop() {\n      this.crop = false;\n    },\n    // 清除截图\n    clearCrop() {\n      this.cropping = false;\n      this.cropW = 0;\n      this.cropH = 0;\n    },\n    // 截图移动\n    cropMove(e) {\n      e.preventDefault();\n      if (!this.canMoveBox) {\n        this.crop = false;\n        this.startMove(e);\n        return false;\n      }\n      if (e.touches && e.touches.length === 2) {\n        this.crop = false;\n        this.startMove(e);\n        this.leaveCrop();\n        return false;\n      }\n      window.addEventListener(\"mousemove\", this.moveCrop);\n      window.addEventListener(\"mouseup\", this.leaveCrop);\n      window.addEventListener(\"touchmove\", this.moveCrop);\n      window.addEventListener(\"touchend\", this.leaveCrop);\n      let x = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n      let y = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      let newX, newY;\n      newX = x - this.cropOffsertX;\n      newY = y - this.cropOffsertY;\n      this.cropX = newX;\n      this.cropY = newY;\n      // 触发截图框移动事件\n      this.$emit(\"cropMoving\", {\n        moving: true,\n        axis: this.getCropAxis()\n      });\n      this.$emit(\"crop-moving\", {\n        moving: true,\n        axis: this.getCropAxis()\n      });\n    },\n    moveCrop(e, isMove) {\n      let nowX = 0;\n      let nowY = 0;\n      if (e) {\n        e.preventDefault();\n        nowX = 'clientX' in e ? e.clientX : e.touches[0].clientX;\n        nowY = 'clientY' in e ? e.clientY : e.touches[0].clientY;\n      }\n      this.$nextTick(() => {\n        let cx, cy;\n        let fw = nowX - this.cropX;\n        let fh = nowY - this.cropY;\n        if (isMove) {\n          fw = this.cropOffsertX;\n          fh = this.cropOffsertY;\n        }\n        // 不能超过外层容器\n        if (fw <= 0) {\n          cx = 0;\n        } else if (fw + this.cropW > this.w) {\n          cx = this.w - this.cropW;\n        } else {\n          cx = fw;\n        }\n        if (fh <= 0) {\n          cy = 0;\n        } else if (fh + this.cropH > this.h) {\n          cy = this.h - this.cropH;\n        } else {\n          cy = fh;\n        }\n        // 不能超过图片\n        if (this.centerBox) {\n          let axis = this.getImgAxis();\n          // 横坐标判断\n          if (cx <= axis.x1) {\n            cx = axis.x1;\n          }\n          if (cx + this.cropW > axis.x2) {\n            cx = axis.x2 - this.cropW;\n          }\n          // 纵坐标纵轴\n          if (cy <= axis.y1) {\n            cy = axis.y1;\n          }\n          if (cy + this.cropH > axis.y2) {\n            cy = axis.y2 - this.cropH;\n          }\n        }\n        this.cropOffsertX = cx;\n        this.cropOffsertY = cy;\n        // 触发截图框移动事件\n        this.$emit(\"cropMoving\", {\n          moving: true,\n          axis: this.getCropAxis()\n        });\n        this.$emit(\"crop-moving\", {\n          moving: true,\n          axis: this.getCropAxis()\n        });\n      });\n    },\n    // 算出不同场景下面 图片相对于外层容器的坐标轴\n    getImgAxis(x, y, scale) {\n      x = x || this.x;\n      y = y || this.y;\n      scale = scale || this.scale;\n      // 如果设置了截图框在图片内， 那么限制截图框不能超过图片的坐标\n      // 图片的坐标\n      let obj = {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0\n      };\n      let imgW = this.trueWidth * scale;\n      let imgH = this.trueHeight * scale;\n      switch (this.rotate) {\n        case 0:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2;\n          obj.x2 = obj.x1 + this.trueWidth * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2;\n          obj.y2 = obj.y1 + this.trueHeight * scale;\n          break;\n        case 1:\n        case -1:\n        case 3:\n        case -3:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2 + (imgW - imgH) / 2;\n          obj.x2 = obj.x1 + this.trueHeight * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2 + (imgH - imgW) / 2;\n          obj.y2 = obj.y1 + this.trueWidth * scale;\n          break;\n        default:\n          obj.x1 = x + (this.trueWidth * (1 - scale)) / 2;\n          obj.x2 = obj.x1 + this.trueWidth * scale;\n          obj.y1 = y + (this.trueHeight * (1 - scale)) / 2;\n          obj.y2 = obj.y1 + this.trueHeight * scale;\n          break;\n      }\n      return obj;\n    },\n    // 获取截图框的坐标轴\n    getCropAxis() {\n      let obj = {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0\n      };\n      obj.x1 = this.cropOffsertX;\n      obj.x2 = obj.x1 + this.cropW;\n      obj.y1 = this.cropOffsertY;\n      obj.y2 = obj.y1 + this.cropH;\n      return obj;\n    },\n    leaveCrop() {\n      window.removeEventListener(\"mousemove\", this.moveCrop);\n      window.removeEventListener(\"mouseup\", this.leaveCrop);\n      window.removeEventListener(\"touchmove\", this.moveCrop);\n      window.removeEventListener(\"touchend\", this.leaveCrop);\n      // 触发截图框移动事件\n      this.$emit(\"cropMoving\", {\n        moving: false,\n        axis: this.getCropAxis()\n      });\n      this.$emit(\"crop-moving\", {\n        moving: false,\n        axis: this.getCropAxis()\n      });\n    },\n    getCropChecked(cb) {\n      let canvas = document.createElement(\"canvas\");\n      let img = new Image();\n      let rotate = this.rotate;\n      let trueWidth = this.trueWidth;\n      let trueHeight = this.trueHeight;\n      let cropOffsertX = this.cropOffsertX;\n      let cropOffsertY = this.cropOffsertY;\n      img.onload = () => {\n        if (this.cropW !== 0) {\n          let ctx = canvas.getContext(\"2d\");\n          let dpr = 1;\n          if (this.high & !this.full) {\n            dpr = window.devicePixelRatio;\n          }\n          if ((this.enlarge !== 1) & !this.full) {\n            dpr = Math.abs(Number(this.enlarge));\n          }\n          let width = this.cropW * dpr;\n          let height = this.cropH * dpr;\n          let imgW = trueWidth * this.scale * dpr;\n          let imgH = trueHeight * this.scale * dpr;\n          // 图片x轴偏移\n          let dx =\n            (this.x - cropOffsertX + (this.trueWidth * (1 - this.scale)) / 2) *\n            dpr;\n          // 图片y轴偏移\n          let dy =\n            (this.y - cropOffsertY + (this.trueHeight * (1 - this.scale)) / 2) *\n            dpr;\n          //保存状态\n          setCanvasSize(width, height);\n          ctx.save();\n          switch (rotate) {\n            case 0:\n              if (!this.full) {\n                ctx.drawImage(img, dx, dy, imgW, imgH);\n              } else {\n                // 输出原图比例截图\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.drawImage(\n                  img,\n                  dx / this.scale,\n                  dy / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 1:\n            case -3:\n              if (!this.full) {\n                // 换算图片旋转后的坐标弥补\n                dx = dx + (imgW - imgH) / 2;\n                dy = dy + (imgH - imgW) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, dy, -dx - imgH, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                // 换算图片旋转后的坐标弥补\n                dx =\n                  dx / this.scale + (imgW / this.scale - imgH / this.scale) / 2;\n                dy =\n                  dy / this.scale + (imgH / this.scale - imgW / this.scale) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(\n                  img,\n                  dy,\n                  -dx - imgH / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 2:\n            case -2:\n              if (!this.full) {\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, -dx - imgW, -dy - imgH, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                dx = dx / this.scale;\n                dy = dy / this.scale;\n                ctx.drawImage(\n                  img,\n                  -dx - imgW / this.scale,\n                  -dy - imgH / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            case 3:\n            case -1:\n              if (!this.full) {\n                // 换算图片旋转后的坐标弥补\n                dx = dx + (imgW - imgH) / 2;\n                dy = dy + (imgH - imgW) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(img, -dy - imgW, dx, imgW, imgH);\n              } else {\n                setCanvasSize(width / this.scale, height / this.scale);\n                // 换算图片旋转后的坐标弥补\n                dx =\n                  dx / this.scale + (imgW / this.scale - imgH / this.scale) / 2;\n                dy =\n                  dy / this.scale + (imgH / this.scale - imgW / this.scale) / 2;\n                ctx.rotate((rotate * 90 * Math.PI) / 180);\n                ctx.drawImage(\n                  img,\n                  -dy - imgW / this.scale,\n                  dx,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n              break;\n            default:\n              if (!this.full) {\n                ctx.drawImage(img, dx, dy, imgW, imgH);\n              } else {\n                // 输出原图比例截图\n                setCanvasSize(width / this.scale, height / this.scale);\n                ctx.drawImage(\n                  img,\n                  dx / this.scale,\n                  dy / this.scale,\n                  imgW / this.scale,\n                  imgH / this.scale\n                );\n              }\n          }\n          ctx.restore();\n        } else {\n          let width = trueWidth * this.scale;\n          let height = trueHeight * this.scale;\n          let ctx = canvas.getContext(\"2d\");\n          ctx.save();\n          switch (rotate) {\n            case 0:\n              setCanvasSize(width, height);\n              ctx.drawImage(img, 0, 0, width, height);\n              break;\n            case 1:\n            case -3:\n              // 旋转90度 或者-270度 宽度和高度对调\n              setCanvasSize(height, width);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, 0, -height, width, height);\n              break;\n            case 2:\n            case -2:\n              setCanvasSize(width, height);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, -width, -height, width, height);\n              break;\n            case 3:\n            case -1:\n              setCanvasSize(height, width);\n              ctx.rotate((rotate * 90 * Math.PI) / 180);\n              ctx.drawImage(img, -width, 0, width, height);\n              break;\n            default:\n              setCanvasSize(width, height);\n              ctx.drawImage(img, 0, 0, width, height);\n          }\n          ctx.restore();\n        }\n        cb(canvas);\n      };\n      // 判断图片是否是base64\n      var s = this.img.substr(0, 4);\n      if (s !== \"data\") {\n        img.crossOrigin = \"Anonymous\";\n      }\n      img.src = this.imgs;\n      function setCanvasSize(width, height) {\n        canvas.width = Math.round(width);\n        canvas.height = Math.round(height);\n      }\n    },\n    // 获取转换成base64 的图片信息\n    getCropData(cb) {\n      this.getCropChecked(data => {\n        cb(data.toDataURL(\"image/\" + this.outputType, this.outputSize));\n      });\n    },\n    //canvas获取为blob对象\n    getCropBlob(cb) {\n      this.getCropChecked(data => {\n        data.toBlob(\n          blob => cb(blob),\n          \"image/\" + this.outputType,\n          this.outputSize\n        );\n      });\n    },\n    // 自动预览函数\n    showPreview() {\n      // 优化不要多次触发\n      if (this.isCanShow) {\n        this.isCanShow = false;\n        setTimeout(() => {\n          this.isCanShow = true;\n        }, 16);\n      } else {\n        return false;\n      }\n      let w = this.cropW;\n      let h = this.cropH;\n      let scale = this.scale;\n      var obj = {};\n      obj.div = {\n        width: `${w}px`,\n        height: `${h}px`\n      };\n      let transformX = (this.x - this.cropOffsertX) / scale;\n      let transformY = (this.y - this.cropOffsertY) / scale;\n      let transformZ = 0;\n      obj.w = w;\n      obj.h = h;\n      obj.url = this.imgs;\n      obj.img = {\n        width: `${this.trueWidth}px`,\n        height: `${this.trueHeight}px`,\n        transform: `scale(${scale})translate3d(${transformX}px, ${transformY}px, ${transformZ}px)rotateZ(${this\n          .rotate * 90}deg)`\n      };\n      obj.html = `\n      <div class=\"show-preview\" style=\"width: ${obj.w}px; height: ${\n        obj.h\n      }px,; overflow: hidden\">\n        <div style=\"width: ${w}px; height: ${h}px\">\n          <img src=${obj.url} style=\"width: ${this.trueWidth}px; height: ${\n        this.trueHeight\n      }px; transform:\n          scale(${scale})translate3d(${transformX}px, ${transformY}px, ${transformZ}px)rotateZ(${this\n        .rotate * 90}deg)\">\n        </div>\n      </div>`;\n      this.$emit(\"realTime\", obj);\n      this.$emit(\"real-time\", obj);\n    },\n    // reload 图片布局函数\n    reload() {\n      let img = new Image();\n      img.onload = () => {\n        // 读取图片的信息原始信息， 解析是否需要旋转\n        // 读取图片的旋转信息\n        // 得到外层容器的宽度高度\n        this.w = parseFloat(window.getComputedStyle(this.$refs.cropper).width);\n        this.h = parseFloat(window.getComputedStyle(this.$refs.cropper).height);\n        // 存入图片真实高度\n        this.trueWidth = img.width;\n        this.trueHeight = img.height;\n        // 判断是否需要压缩大图\n        if (!this.original) {\n          // 判断布局方式 mode\n          this.scale = this.checkedMode();\n        } else {\n          this.scale = 1;\n        }\n        this.$nextTick(() => {\n          this.x =\n            -(this.trueWidth - this.trueWidth * this.scale) / 2 +\n            (this.w - this.trueWidth * this.scale) / 2;\n          this.y =\n            -(this.trueHeight - this.trueHeight * this.scale) / 2 +\n            (this.h - this.trueHeight * this.scale) / 2;\n          this.loading = false;\n          // // 获取是否开启了自动截图\n          if (this.autoCrop) {\n            this.goAutoCrop();\n          }\n          // 图片加载成功的回调\n          this.$emit(\"img-load\", \"success\");\n          this.$emit(\"imgLoad\", \"success\");\n          setTimeout(() => {\n            this.showPreview();\n          }, 20);\n        });\n      };\n      img.onerror = () => {\n        this.$emit(\"imgLoad\", \"error\");\n        this.$emit(\"img-load\", \"error\");\n      };\n      img.src = this.imgs;\n    },\n    // 背景布局的函数\n    checkedMode() {\n      let scale = 1;\n      // 通过字符串分割\n      let imgW = this.trueWidth;\n      let imgH = this.trueHeight;\n      const arr = this.mode.split(\" \");\n      switch (arr[0]) {\n        case \"contain\":\n          if (this.trueWidth > this.w) {\n            // 如果图片宽度大于容器宽度\n            scale = this.w / this.trueWidth;\n          }\n          if (this.trueHeight * scale > this.h) {\n            scale = this.h / this.trueHeight;\n          }\n          break;\n        case \"cover\":\n          // 扩展布局 默认填充满整个容器\n          // 图片宽度大于容器\n          imgW = this.w;\n          scale = imgW / this.trueWidth;\n          imgH = imgH * scale;\n          // 如果扩展之后高度小于容器的外层高度 继续扩展高度\n          if (imgH < this.h) {\n            imgH = this.h;\n            scale = imgH / this.trueHeight;\n          }\n          break;\n        default:\n          try {\n            let str = arr[0];\n            if (str.search(\"px\") !== -1) {\n              str = str.replace(\"px\", \"\");\n              imgW = parseFloat(str);\n              const scaleX = imgW / this.trueWidth;\n              let scaleY = 1;\n              let strH = arr[1];\n              if (strH.search(\"px\") !== -1) {\n                strH = strH.replace(\"px\", \"\");\n                imgH = parseFloat(strH);\n                scaleY = imgH / this.trueHeight;\n              }\n              scale = Math.min(scaleX,scaleY)\n            }\n            if (str.search(\"%\") !== -1) {\n              str = str.replace(\"%\", \"\");\n              imgW = (parseFloat(str) / 100) * this.w;\n              scale = imgW / this.trueWidth;\n            }\n            if (arr.length === 2 && str === \"auto\") {\n              let str2 = arr[1];\n              if (str2.search(\"px\") !== -1) {\n                str2 = str2.replace(\"px\", \"\");\n                imgH = parseFloat(str2);\n                scale = imgH / this.trueHeight;\n              }\n              if (str2.search(\"%\") !== -1) {\n                str2 = str2.replace(\"%\", \"\");\n                imgH = (parseFloat(str2) / 100) * this.h;\n                scale = imgH / this.trueHeight;\n              }\n            }\n          } catch (error) {\n            scale = 1;\n          }\n      }\n      return scale;\n    },\n    // 自动截图函数\n    goAutoCrop(cw, ch) {\n      if (this.imgs === '' || this.imgs === null) return\n      this.clearCrop();\n      this.cropping = true;\n      let maxWidth = this.w;\n      let maxHeight = this.h;\n      if (this.centerBox) {\n        const switchWH = Math.abs(this.rotate) % 2 > 0\n        let imgW = (switchWH ? this.trueHeight : this.trueWidth) * this.scale;\n        let imgH = (switchWH ? this.trueWidth : this.trueHeight) * this.scale;\n        maxWidth = imgW < maxWidth ? imgW : maxWidth;\n        maxHeight = imgH < maxHeight ? imgH : maxHeight;\n      }\n      // 截图框默认大小\n      // 如果为0 那么计算容器大小 默认为80%\n      var w = cw ? cw : parseFloat(this.autoCropWidth);\n      var h = ch ? ch : parseFloat(this.autoCropHeight);\n      if (w === 0 || h === 0) {\n        w = maxWidth * 0.8;\n        h = maxHeight * 0.8;\n      }\n      w = w > maxWidth ? maxWidth : w;\n      h = h > maxHeight ? maxHeight : h;\n      if (this.fixed) {\n        h = (w / this.fixedNumber[0]) * this.fixedNumber[1];\n      }\n      // 如果比例之后 高度大于h\n      if (h > this.h) {\n        h = this.h;\n        w = (h / this.fixedNumber[1]) * this.fixedNumber[0];\n      }\n      this.changeCrop(w, h);\n    },\n    // 手动改变截图框大小函数\n    changeCrop(w, h) {\n      if (this.centerBox) {\n        // 修复初始化时候在centerBox=true情况下\n        let axis = this.getImgAxis();\n        if (w > axis.x2 - axis.x1) {\n          // 宽度超标\n          w = axis.x2 - axis.x1;\n          h = (w / this.fixedNumber[0]) * this.fixedNumber[1];\n        }\n        if (h > axis.y2 - axis.y1) {\n          // 高度超标\n          h = axis.y2 - axis.y1;\n          w = (h / this.fixedNumber[1]) * this.fixedNumber[0];\n        }\n      }\n      // 判断是否大于容器\n      this.cropW = w;\n      this.cropH = h;\n      this.checkCropLimitSize()\n      this.$nextTick(() => {\n        // 居中走一走\n        this.cropOffsertX = (this.w - this.cropW) / 2;\n        this.cropOffsertY = (this.h - this.cropH) / 2;\n        if (this.centerBox) {\n          this.moveCrop(null, true);\n        }\n      });\n    },\n    // 重置函数， 恢复组件置初始状态\n    refresh() {\n      // let img = this.img;\n      this.imgs = \"\";\n      this.scale = 1;\n      this.crop = false;\n      this.rotate = 0;\n      this.w = 0;\n      this.h = 0;\n      this.trueWidth = 0;\n      this.trueHeight = 0;\n      this.clearCrop();\n      this.$nextTick(() => {\n        this.checkedImg();\n      });\n    },\n    // 向左边旋转\n    rotateLeft() {\n      this.rotate = this.rotate <= -3 ? 0 : this.rotate - 1;\n    },\n    // 向右边旋转\n    rotateRight() {\n      this.rotate = this.rotate >= 3 ? 0 : this.rotate + 1;\n    },\n    // 清除旋转\n    rotateClear() {\n      this.rotate = 0;\n    },\n    // 图片坐标点校验\n    checkoutImgAxis(x, y, scale) {\n      x = x || this.x;\n      y = y || this.y;\n      scale = scale || this.scale;\n      let canGo = true;\n      // 开始校验 如果说缩放之后的坐标在截图框外 则阻止缩放\n      if (this.centerBox) {\n        let axis = this.getImgAxis(x, y, scale);\n        let cropAxis = this.getCropAxis();\n        // 左边的横坐标 图片不能超过截图框\n        if (axis.x1 >= cropAxis.x1) {\n          canGo = false;\n        }\n        // 右边横坐标\n        if (axis.x2 <= cropAxis.x2) {\n          canGo = false;\n        }\n        // 纵坐标上面\n        if (axis.y1 >= cropAxis.y1) {\n          canGo = false;\n        }\n        // 纵坐标下面\n        if (axis.y2 <= cropAxis.y2) {\n          canGo = false;\n        }\n      }\n      return canGo;\n    }\n  },\n  mounted() {\n    this.support =\n      \"onwheel\" in document.createElement(\"div\")\n        ? \"wheel\"\n        : document.onmousewheel !== undefined\n        ? \"mousewheel\"\n        : \"DOMMouseScroll\";\n    let that = this;\n    var u = navigator.userAgent;\n    this.isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n    // 兼容blob\n    if (!HTMLCanvasElement.prototype.toBlob) {\n      Object.defineProperty(HTMLCanvasElement.prototype, \"toBlob\", {\n        value: function(callback, type, quality) {\n          var binStr = atob(this.toDataURL(type, quality).split(\",\")[1]),\n            len = binStr.length,\n            arr = new Uint8Array(len);\n          for (var i = 0; i < len; i++) {\n            arr[i] = binStr.charCodeAt(i);\n          }\n          callback(new Blob([arr], { type: that.type || \"image/png\" }));\n        }\n      });\n    }\n    this.showPreview();\n    this.checkedImg();\n  },\n  destroyed() {\n    window.removeEventListener(\"mousemove\", this.moveCrop);\n    window.removeEventListener(\"mouseup\", this.leaveCrop);\n    window.removeEventListener(\"touchmove\", this.moveCrop);\n    window.removeEventListener(\"touchend\", this.leaveCrop);\n    this.cancelScale()\n  }\n};\n</script>\n\n<style scoped lang=\"css\">\n.vue-cropper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC\");\n}\n.cropper-box,\n.cropper-box-canvas,\n.cropper-drag-box,\n.cropper-crop-box,\n.cropper-face {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  user-select: none;\n}\n.cropper-box-canvas img {\n  position: relative;\n  text-align: left;\n  user-select: none;\n  transform: none;\n  max-width: none;\n  max-height: none;\n}\n.cropper-box {\n  overflow: hidden;\n}\n.cropper-move {\n  cursor: move;\n}\n.cropper-crop {\n  cursor: crosshair;\n}\n.cropper-modal {\n  background: rgba(0, 0, 0, 0.5);\n}\n/* .cropper-crop-box { */\n  /*border: 2px solid #39f;*/\n/* } */\n.cropper-view-box {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  user-select: none;\n}\n.cropper-view-box img {\n  user-select: none;\n  text-align: left;\n  max-width: none;\n  max-height: none;\n}\n.cropper-face {\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  opacity: 0.1;\n}\n.crop-info {\n  position: absolute;\n  left: 0px;\n  min-width: 65px;\n  text-align: center;\n  color: white;\n  line-height: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-size: 12px;\n}\n.crop-line {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  opacity: 0.1;\n}\n.line-w {\n  top: -3px;\n  left: 0;\n  height: 5px;\n  cursor: n-resize;\n}\n.line-a {\n  top: 0;\n  left: -3px;\n  width: 5px;\n  cursor: w-resize;\n}\n.line-s {\n  bottom: -3px;\n  left: 0;\n  height: 5px;\n  cursor: s-resize;\n}\n.line-d {\n  top: 0;\n  right: -3px;\n  width: 5px;\n  cursor: e-resize;\n}\n.crop-point {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  opacity: 0.75;\n  background-color: #39f;\n  border-radius: 100%;\n}\n.point1 {\n  top: -4px;\n  left: -4px;\n  cursor: nw-resize;\n}\n.point2 {\n  top: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: n-resize;\n}\n.point3 {\n  top: -4px;\n  right: -4px;\n  cursor: ne-resize;\n}\n.point4 {\n  top: 50%;\n  left: -4px;\n  margin-top: -3px;\n  cursor: w-resize;\n}\n.point5 {\n  top: 50%;\n  right: -4px;\n  margin-top: -3px;\n  cursor: e-resize;\n}\n.point6 {\n  bottom: -5px;\n  left: -4px;\n  cursor: sw-resize;\n}\n.point7 {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: s-resize;\n}\n.point8 {\n  bottom: -5px;\n  right: -4px;\n  cursor: se-resize;\n}\n@media screen and (max-width: 500px) {\n  .crop-point {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    opacity: 0.45;\n    background-color: #39f;\n    border-radius: 100%;\n  }\n  .point1 {\n    top: -10px;\n    left: -10px;\n  }\n  .point2,\n  .point4,\n  .point5,\n  .point7 {\n    display: none;\n  }\n  .point3 {\n    top: -10px;\n    right: -10px;\n  }\n  .point4 {\n    top: 0;\n    left: 0;\n  }\n  .point6 {\n    bottom: -10px;\n    left: -10px;\n  }\n  .point8 {\n    bottom: -10px;\n    right: -10px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-cropper.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-cropper.vue?vue&type=script&lang=js&\"","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { render, staticRenderFns } from \"./image-cropper.vue?vue&type=template&id=2cd22fa3&scoped=true&\"\nimport script from \"./image-cropper.vue?vue&type=script&lang=js&\"\nexport * from \"./image-cropper.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image-cropper.vue?vue&type=style&index=0&id=2cd22fa3&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cd22fa3\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"container\">\n      <div\n        class=\"crop-wrapper mr16 fl\"\n        :style=\"{ width: canvasWidth, height: canvasHeight }\"\n      >\n        <ImageCropper\n          ref=\"cropper\"\n          :img=\"option.img\"\n          :outputSize=\"option.size\"\n          :outputType=\"option.outputType\"\n          auto-crop\n          :canMove=\"option.canMove\"\n          mode=\"contain\"\n          :autoCropWidth=\"canvasWidth\"\n          :autoCropHeight=\"canvasHeight\"\n          @realTime=\"realTime\"\n        />\n      </div>\n      <canvas id=\"target_canvas\" style=\"display: none\"></canvas>\n      <div\n        class=\"recover_img_cover fl\"\n        :style=\"{ width: canvasWidth, height: canvasHeight }\"\n      >\n        <div\n          id=\"recover_img\"\n          :style=\"{ backgroundImage: `url('${recoverImgUrl}')` }\"\n        ></div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport ImageCropper from './image-cropper.vue';\n// import vRadio from './v-radio.vue';\nexport default {\n  name: 'VueImageHandler',\n  components: {\n    ImageCropper,\n    // vRadio,\n  },\n  props: {\n    imgFile: {\n      required: true,\n    },\n    canvasWidth: {\n      type: String,\n      default: '380px',\n    },\n    canvasHeight: {\n      type: String,\n      default: '252px',\n    },\n    colorDiff: {\n      type: Number,\n      default: 20,\n    },\n    wipeColor: String,\n  },\n  data() {\n    return {\n      model: false,\n      modelSrc: '',\n      crap: false,\n      option: {\n        img: '',\n        size: 1,\n        full: false,\n        outputType: 'png',\n        canMove: true,\n        fixedBox: false,\n        original: false,\n        canMoveBox: true,\n        autoCrop: true,\n        // 只有自动截图开启 宽度高度才生效\n        autoCropWidth: 160,\n        autoCropHeight: 150,\n        centerBox: false,\n        high: true,\n        max: 99999,\n      },\n      img: null,\n      canvasInfo: {\n        width: 380,\n        height: 252,\n      },\n      imgDataArr: [],\n      resultImgDataArr: [],\n      drawImgWidth: '',\n      drawImgHeight: '',\n      drawImgDx: '',\n      drawImgDy: '',\n      COLORS: {\n        WHITE: {\n          aValue: 255,\n          bValue: 255,\n          gValue: 255,\n          rValue: 255,\n        },\n        BLACK: {\n          aValue: 255,\n          bValue: 0,\n          gValue: 0,\n          rValue: 0,\n        },\n      },\n      clickColorInfo: {},\n      recoverImgUrl: '',\n    };\n  },\n  computed: {},\n  watch: {\n    imgFile: {\n      handler() {\n        if (this.imgFile) {\n          this.init();\n        }\n      },\n      immediate: true,\n    },\n    colorDiff() {\n      if (this.wipeColor) {\n        this.resultImgDataArr = [];\n        this.transparentModeCanvas();\n      }\n    },\n    wipeColor() {\n      if (!this.wipeColor) {\n        this.recoverCanvas();\n        return;\n      } else {\n        const colorFieldName = this.wipeColor === 'white' ? 'WHITE' : 'BLACK';\n        this.resultImgDataArr = [];\n        this.clickColorInfo = this.COLORS[colorFieldName];\n      }\n      this.transparentModeCanvas();\n    }\n  },\n  created() {\n    this.canvasInfo.width = this.canvasWidth;\n    this.canvasInfo.height = this.canvasHeight;\n  },\n  mounted() {\n    this.img = new Image();\n    this.initCanvasInfo();\n  },\n  methods: {\n    // changeWipeColor(e) {\n    //   if (!e) {\n    //     this.recoverCanvas();\n    //     return;\n    //   } else {\n    //     const colorFieldName = e === 'white' ? 'WHITE' : 'BLACK';\n    //     this.resultImgDataArr = [];\n    //     this.clickColorInfo = this.COLORS[colorFieldName];\n    //   }\n    //   this.transparentModeCanvas();\n    // },\n    handleSkip(callback) {\n      callback(this.imgFile);\n    },\n    init() {\n      this.option.img = this.imgFile;\n      // this.wipeColor = '';\n      // this.colorDiff = 20;\n      this.clickColorInfo = {};\n      this.resultImgDataArr = [];\n      this.$nextTick(() => {\n        this.$refs.cropper.reload();\n      });\n    },\n    recoverCanvas() {\n      if (this.imgDataArr.length === 0) {\n        return;\n      }\n      const ctx = document.getElementById('target_canvas').getContext('2d');\n      ctx.putImageData(\n        new ImageData(this.imgDataArr, this.drawImgWidth, this.drawImgHeight),\n        this.drawImgDx,\n        this.drawImgDy\n      );\n      this.setCanvasImgToDownloadLink();\n    },\n    // handleChangeColorDiff() {\n    //     if (this.wipeColor) {\n    //         this.resultImgDataArr = [];\n    //         this.transparentModeCanvas();\n    //     }\n    // },\n    handleCrop() {\n      this.$refs.cropper.getCropBlob(data => {\n        this.setImgIntoCanvas(data);\n      });\n    },\n    handleClose() {\n      this.$emit('update:visible', false);\n      this.option.img = '';\n    },\n    // 实时预览函数\n    realTime() {\n      this.$refs.cropper.getCropBlob(data => {\n        this.setImgIntoCanvas(data);\n      });\n    },\n    // 初始化canvas信息\n    initCanvasInfo() {\n      const $targetCanvas = document.getElementById('target_canvas');\n      if ($targetCanvas) {\n        this.canvasInfo.width = this.canvasWidth.replace('px', '');\n        this.canvasInfo.height = this.canvasHeight.replace('px', '');\n      }\n    },\n    // 加载图片资源到canvas中\n    setImgIntoCanvas(imgFile) {\n      const reader = new FileReader();\n      reader.readAsDataURL(imgFile);\n      reader.onloadend = e => {\n        const dataURL = e.target.result;\n        this.img.src = dataURL;\n        this.img.onload = () => {\n          const ctx = document.getElementById('target_canvas').getContext('2d');\n          //将canvas大小设置为和图片一样大\n          let imgRatio = this.img.width / this.img.height,\n            canvasRatio = this.canvasInfo.width / this.canvasInfo.height,\n            dw,\n            dh,\n            dx,\n            dy;\n          if (imgRatio < canvasRatio) {\n            dw = imgRatio * this.canvasInfo.height;\n            dx = (this.canvasInfo.width - dw) / 2;\n            dh = this.canvasInfo.height;\n            dy = 0;\n          } else if (imgRatio === canvasRatio) {\n            dw = this.canvasInfo.width;\n            dh = this.canvasInfo.height;\n            dx = 0;\n            dy = 0;\n          } else {\n            dw = this.canvasInfo.width;\n            dh = dw / imgRatio;\n            dx = 0;\n            dy = (this.canvasInfo.height - dh) / 2;\n          }\n          this.drawImgWidth = dw;\n          this.drawImgHeight = dh;\n          this.drawImgDx = dx;\n          this.drawImgDy = dy;\n          this.setCanvasSize(this.canvasInfo.width, this.canvasInfo.height);\n          ctx.drawImage(this.img, dx, dy, dw, dh);\n          this.imgDataArr = ctx.getImageData(dx, dy, dw, dh).data;\n          this.resultImgDataArr = this.imgDataArr.slice(0);\n          this.transparentModeCanvas();\n        };\n      };\n    },\n    // 设置容差范围内的像素值为透明\n    transparentModeCanvas() {\n      if (this.imgDataArr.length === 0) {\n        return;\n      }\n      if (this.resultImgDataArr.length === 0) {\n        this.resultImgDataArr = this.imgDataArr.slice(0);\n      }\n      const ctx = document.getElementById('target_canvas').getContext('2d');\n      for (\n        let pos = this.canvasInfo.width * this.canvasInfo.height * 4 - 4;\n        pos >= 0;\n        pos = pos - 4\n      ) {\n        if (\n          this.getColorDiff(this.resultImgDataArr, pos, this.clickColorInfo) <\n          this.colorDiff\n        ) {\n          this.resultImgDataArr[pos] = 0;\n          this.resultImgDataArr[pos + 1] = 0;\n          this.resultImgDataArr[pos + 2] = 0;\n          this.resultImgDataArr[pos + 3] = 0;\n        }\n      }\n      ctx.putImageData(\n        new ImageData(\n          this.resultImgDataArr,\n          this.drawImgWidth,\n          this.drawImgHeight\n        ),\n        this.drawImgDx,\n        this.drawImgDy\n      );\n      this.setCanvasImgToDownloadLink();\n    },\n    // 设置canvas宽高\n    setCanvasSize(width, height) {\n      this.canvasInfo.width = width;\n      this.canvasInfo.height = height;\n      const targetCanvasEl = document.getElementById('target_canvas');\n      targetCanvasEl.width = width;\n      targetCanvasEl.height = height;\n    },\n    //获取图像数据指定位置颜色与指定颜色的色差\n    getColorDiff(imgDataArr, pos, colorInfo) {\n      const value =\n        Math.pow(imgDataArr[pos] - colorInfo.rValue, 2) +\n        Math.pow(imgDataArr[pos + 1] - colorInfo.gValue, 2) +\n        Math.pow(imgDataArr[pos + 2] - colorInfo.bValue, 2);\n      return Math.pow(value, 0.5);\n    },\n    /**\n     * 获取图像数据中指定偏移处的颜色信息\n     */\n    getColorInfo(imgDataArr, offsetX, offsetY) {\n      const pos = this.canvasInfo.width * 4 * offsetY + offsetX * 4;\n      return {\n        rValue: imgDataArr[pos],\n        gValue: imgDataArr[pos + 1],\n        bValue: imgDataArr[pos + 2],\n        aValue: imgDataArr[pos + 3],\n      };\n    },\n    /**\n     * 设置canvas图像到下载链接上\n     */\n    setCanvasImgToDownloadLink() {\n      const imgData = document.getElementById('target_canvas').toDataURL();\n      this.recoverImgUrl = imgData;\n    },\n    /**\n     * 确认返回最终处理完的图片\n     */\n    getImageUrl(callback) {\n      callback(this.recoverImgUrl);\n      // this.$emit('getImageUrl', this.recoverImgUrl);\n    },\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n.crop-img-preview-box {\n  border: 1px dashed #0784ff;\n}\n.recover_img_cover {\n  position: relative;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n}\n.recover_img_cover #recover_img {\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: 50%;\n  background-size: contain;\n}\n.flex {\n  display: flex;\n}\n.mr16 {\n  margin-right: 16px;\n}\n.center {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.fl {\n  float: left;\n}\n.container {\n  width: fit-content;\n}\n.container:after {\n  content: '';\n  display: block;\n  width: 0;\n  height: 0;\n  clear: both;\n  visibility: hidden;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2f0f5c24&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2f0f5c24&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f0f5c24\",\n  null\n  \n)\n\nexport default component.exports","// 导入图片处理组件\nimport VueImageHandler from './vue-image-handler/src/index.vue';\n \n// 存储组件列表\nconst components = [VueImageHandler];\n// 定义 install 方法，接收 Vue 作为参数。如果使用 use 注册插件，则所有的组件都将被注册\nconst install = function(Vue) {\n  // 判断是否安装\n  if (install.installed) return;\n  // 遍历注册全局组件\n  components.forEach(component => {\n    Vue.component(component.name, component)\n  });\n};\n// 判断是否是直接引入文件\nif (typeof window !== \"undefined\" && window.Vue) {\n  install(window.Vue);\n}\nexport default {\n  // 导出的对象必须具有 install，才能被 Vue.use() 方法安装\n  install,\n  // 以下是具体的组件列表\n  VueImageHandler\n};","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}